网站架构技术

---

# 前端架构

	用户请求到达网站应用服务器之前经历的环节，通常不包含网站业务逻辑，不处理动态内容
	
- 浏览器优化技术
	* 通过优化响应页面，加快浏览器页面的加载显示，常用的有页面缓存，合并HTTP减少请求次数、使用页面压缩等

- CDN
	* 内容分发网络，部署在网络运营商机房，通过将静态网页内容分发到离用户最近的CDN服务器，使用户可以通过最短路径获取内容
	
- 动静分离，静态资源独立部署
	* 静态资源，如JS、CSS等文件部署在专门的服务器集群上，和Web应用动态内容服务分离，并使用专门的(二级)域名
	
- 图片服务
	* 用户上传的图片使用独立的图片服务器部署，并使用独立(二级)域名
	
- 方向代理
	* 部署在网站机房，在应用服务器、静态资源服务器、图片服务器之前，提供页面缓存服务
	
- DNS
	* 域名服务，将域名解析成IP地址，利用DNS可以实现DNS负载均衡，配置CDN也需要修改DNS，使域名解析后指向CDN服务器
	
# 应用层架构

	处理网站主要业务逻辑的地方

- 开发框架
	* 好的框架应该分离关注面，同时还应该内置一些安全策略，防护Web应用攻击

- 页面渲染
	* 将分别开发维护的动态内容和静态页面模板集成起来
	
- 负载均衡
	* 将多台服务器组成一个集群，通过负载均衡技术将用户请求分发到不同服务器，以应对大量用户同时访问时产生的高并发负载压力
	
- Session管理
	* 通常应用服务器集群为实现高可用，设计为无状态，不保存用户请求上下文信息。用户会话信息，需要有专门的机制管理Session，使集群内甚至跨集群共享Session
	
- 动态页面静态化
	* 对于访问量特别大而更新又不很频繁的动态页面，可以将其静态化，然后利用静态页面的优化手段加速用户访问，如反向代理、CDN、浏览器缓存等
	
- 业务拆分

- 虚拟化服务器
	* 将一台物理服务器虚拟化成多个虚拟服务器，对于并发访问较低的业务，更容易用较少的资源构建高可用的应用服务器集群
	
# 服务层架构

	提供基础服务，供应用层调用，完成网站业务

- 分布式消息
	* 利用消息队列机制，实现业务和业务，业务和服务之间异步消息发送及低耦合的业务关系

- 分布式服务
	* 提供高性能、低耦合、易复用、易管理的分布式服务

- 分布式缓存
	* 通过可伸缩的服务器集群提供大规模热点数据的缓存服务

- 分布式配置
	* 在系统运行期间提供配置动态推送服务，将配置修改实时推送到应用系统

# 存储层架构

	提供数据、文件的持久化存储访问与管理服务
	
- 分布式文件
	
- 关系数据库
	* 通过在应用程序的数据访问层增加数据库访问路由功能，根据业务配置将数据库访问路由到不同物理数据库，实现关系数据库的分布式访问

- NoSQL数据库
	
- 数据同步
	* 在支持全球范围内数据共享的分布式数据库技术成熟之前，在实践中，为了减轻数据库压力，将数据库的事务日志(或NoSQL的写操作Log)同步到其他数据中心，根据Log进行数据重演，实现数据同步 

# 后台架构

	除了处理用户实时访问请求外，还有一些后台非实时数据分析处理
	
- 搜索引擎
	* 网站内部的搜索引擎，需要进行数据增量更新及全量更新、构建索引等，这些操作通过后台系统定时执行

- 数据仓库
	* 根据离线数据，提供数据分析和数据挖掘服务

- 推荐系统
	* 社交网站及购物网站通过挖掘人和人之间的关系，发掘潜在的人际关系和购物兴趣，为用户提供个性化推荐服务

# 数据采集与监控

	监控网站访问情况与系统运行情况

- 浏览器数据采集
	* 嵌入JS脚本采集用户浏览器环境和操作记录，分析用户行为

- 服务器业务数据采集
	* 采集服务器端记录的用户请求操作日志
	* 采集应用程序运行期间业务数据

- 服务器性能数据采集
	* 负载均衡、内存使用率、网卡流量等

- 系统监控
	* 自动化运维、自动化处理、自动化控制

- 系统报警
	* 采集来的数据超过阈值，比如系统负载过高，通过邮件、短信、语音电话等发送警报

# 安全架构

	保护网站免遭攻击及敏感信息泄露
	
- Web攻击
	* 以HTTP请求方式发起的攻击，危害最大的就是XSS和SQL注入

- 数据保护
	* 敏感信息加密传输与存储，保护网站和用户资产

# 数据中心机房架构
	
	物理架构
	
- 机房架构
	* 服务器耗电情况，数据中心地理位置最好选择散热良好，供电充裕的地方

- 机柜架构
	* 机柜大小、网线布局、指示灯规格、不间断电源、电压规格(48V直流电还是220V民用交流电)等

- 服务器架构
	* 定制服务器，定制磁盘、内存、CPU，出去不必要的外设接口，并使空间结构利于散热
	
	
	