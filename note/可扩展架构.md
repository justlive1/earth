网站的可扩展性架构

---

	对现有系统影响最小的情况下，系统功能可持续扩展或提升的能力。表现在系统基础设施稳定不需要经常变更，应用之间较少依赖和耦合，对需求变更可以敏捷响应。它是系统架构设计层面的开闭原则(对扩展开发，对修改关闭)，架构设计考虑未来功能扩展，当系统增加新功能时，不需要对现有系统的结构和代码进行修改。
	
# 构建可扩展的网站架构

- 核心思想是模块化，在此基础上降低耦合提高复用性

- 模块分布式部署后具体聚合方式主要有分布式消息队列和分布式服务

- 事件驱动架构
	- 通过在低耦合的模块之间传输事件消息，以保持模块的松散耦合，并借助事件消息的通信完成模块间合作，典型的EDA架构就是操作系统中常见的生产者消费者模式
	- 常用手段是分布式消息队列

- 分布式消息队列
	- 发布订阅模式

- 分布式服务
	- 通过接口分解系统耦合性，不同子系统通过相同接口描述进行服务调用
	- 巨无霸应用带来的问题
		- 编译、部署困难
		- 代码分支管理困难
		- 数据库连接耗尽
		- 新增业务困难
	- 拆分
		- 纵向拆分 将大应用拆分成多个小应用
		- 横向拆分 将复用业务拆分出来独立部署分布式服务

- Web Service
	- 服务提供者通过WSDL(Web服务描述语言)向注册中心描述自身提供的服务接口属性，注册中心使用UDDI(统一描述、发现和集成)发布服务提供者的服务，服务请求者从注册中心检索到服务信息后，通过SOAP(简单对象协议)和服务提供者通信
	- 注册与发现机制臃肿
	- 低效的XML序列化手段 
	- 开销相对较高的HTTP远程通信
	- 复杂的部署与维护手段

- 大型网站分布式服务的需求和特点
	- 负载均衡
	- 失效转移
	- 高效的远程通信
	- 整合异构系统
	- 对应用最少侵入
	- 版本管理
	- 实时监控
	- eg. Dubbo

- 可扩展的数据结构
	- 传统关系型数据库为了保证关系运算的正确性，需要设计表结构的时候，指定schema(字段名称，数据类型等)，并遵循特定范式
	- NoSQL数据库使用ColumnFamily(列族)，创建表的时候，只需要指定ColumnFamily的名字，无需指定字段，可在数据插入的时候再指定
	
- 利用开发平台建设网站生态圈
	- 第三方应用 -> Open API -> 协议转换 -> 安全 -> 审计 -> 路由 -> 流程 -> 网站内部服务
		- API接口 开发平台暴露给开发者使用的一组API，形式可以说RESTful、WebService、RPC等
		- 协议转换 将各种API输入转换成内部服务可识别的形式，并将内部服务返回封装成API格式
		- 安全 身份识别、权限控制、访问带宽限制
		- 审计 记录第三方应用的访问情况，进行监、计费等 
		- 路由 将开发平台的各种访问路由映射到具体的内部服务
		- 流程 将一组离散的服务组织成一个上下文相关的新服务，隐藏服务细节，提供统一接口开发者调用