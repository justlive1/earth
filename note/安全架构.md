网站的安全架构

---

# 网站应用的攻击与防御

- XSS攻击
	- 跨站点脚本攻击(Cross Site Script)，指黑客通过篡改网页，注入恶意HTML脚本，在用户浏览网页时，控制用户浏览器进行恶意操作
	- 反射型 嵌入恶意脚本链接
	- 持久型 提交含有恶意脚本请求，保存到Web站点数据库
	- 消毒 对某些html危险字符转义，如">"转义成"&gt;"
	- HttpOnly 禁止页面JavaScript访问带有HttpOnly属性的Cookie，防止XSS攻击者窃取Cookie
	
- 注入攻击
	- SQL注入
		- 获取表结构信息的手段
			- 开源
			- 错误回显
			- 盲注
		- 避免方式
			- 消毒 和XSS一样 过滤请求
			- 参数绑定
	- OS注入

- CSRF工具
	- 跨站点请求伪造(Cross Site Request Forgery)，攻击者通过跨站请求，以合法用户的身份进行非法操作
	- 核心是利用浏览器Cookie或服务器Session策略，盗取用户身份
	- 表单Token
		- 页面表单增加随机数作为Token，每次响应Token不同
		- 页面正常提交会包含Token，伪造请求无法获取
		- 服务器校验请求参数中Token是否存在
	- 验证码
	- Referer check 图片防盗链
	
- 其他攻击和漏洞
	- Error Code
	- HTML注释
	- 文件上传
	- 路径遍历
	
- Web应用防火墙
	- ModSecurity
		- 处理逻辑与攻击规则集合分离的架构
		- 处理逻辑负责请求和响应的拦截过滤，规则加载执行等功能 比较稳定
		- 攻击规则集合负责描述对具体攻击的规则定义、模式识别、防御策略等功能 需要不断针对漏洞升级
	- NEC的SiteShell

- 网站安全漏洞扫描

# 信息加密技术及密钥安全管理

- 单向散列加密
	- 通过对不同输入长度的信息进行散列计算，得出固定长度的输出，这个散列计算过程是单向的
	- 输入的任何微小的变化都会导致输出完全不同
	- MD5
	- SHA
	
- 对称加密
	- 加密和解密使用的密钥是同一个密钥
	- Cookie加密、通讯加密等
	- 加密效率高，系统开销小，适合对大量数据加密
	- DES、RC

- 非对称加密
	- 加密和解密使用不同一密钥，其中一个对外界公开称为公钥，另一个只有所有者知道称为私钥
	- 信息安全传输、数字签名等
	- RSA
	- HTTPS传输中浏览器使用的数字证书实质上是经过权威机构认证的非对称加密的公钥

- 密钥的安全管理
	- 把密钥和算法放在独立的服务器上，甚至做成专门的加解密的服务
	- 加密算法放在应用系统中，密钥放在独立服务器中
	
# 信息过滤和反垃圾

- 文本匹配
	- 主要解决敏感词过滤问题
	- Trie算法
	- 构造多级Hash表
	- 降噪预处理 (北_京)
	
- 分类算法
	- 贝叶斯分类算法 
		- 利用概率统计
		- 获取已分类样本信息的一组特征值的概率
		- 对待处理信息进行提取特征值 然后进行比较
		- 存在误判和漏判
	- TAN算法
		- 通过对朴素贝叶斯算法增加特征值的关联依赖处理
	- ARCS算法
		- 对关联规则的聚类挖掘
	- 不光用于反垃圾，还可用于信息自动分类
	
- 黑名单
	- 通过Hash表实现
		- 实现简单，时间复杂度小，但在黑名单列表非常大时占据极大的内存空间
	- 布隆过滤器
		- 通过一个二进制列表和n个随机数映射函数实现
		- 相同数量的信息，只是用Hash表所需内存的1/n
		- 存在误判
		
# 电子商务风险控制

- 风险
	- 账户风险 包括账户被黑客盗用，恶意注册账号等
	- 买家风险 买家恶意下单，黄牛抢过促销商品，良品拒收，欺诈退款，交易的虚假询盘
	- 卖家风险 不良卖家进行恶意欺诈的行为
	- 交易风险 信用卡盗刷，支付欺诈，洗钱套现
	
- 风控
	- 规则引擎
		- 将业务规则和规则处理逻辑分离
	- 统计模型
		- 使用分类算法或更复杂的机器学习算法进行智能统计